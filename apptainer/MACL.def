Bootstrap: docker
From: pytorch/pytorch:2.2.2-cuda12.1-cudnn8-runtime

%post
    apt update && apt install -y git wget curl nano vim unzip

    # pip & Python utils
    pip install --upgrade pip setuptools

    # 深度学习 & 可视化
    pip install \
        jupyterlab notebook ipykernel \
        matplotlib seaborn pandas scikit-learn tqdm \
        tensorboard wandb \
        einops timm opencv-python \
        pyrootutils \
        ipywidgets jupyterlab_widgets \
        jupyter_contrib_nbextensions

    # Few-Shot 学习相关支持
    pip install faiss-cpu

    # Hugging Face Dataset 支持
    pip install datasets huggingface_hub

    # Git Python 接口（可选）
    pip install GitPython

%environment
    export PYTHONUNBUFFERED=1
    export PATH=/opt/conda/bin:$PATH

%runscript
    jupyter lab --no-browser --ip=0.0.0.0 --port=8888 --allow-root
